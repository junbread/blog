<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>이펙티브 자바 4장 정리 | Junbread🥐</title><meta name=keywords content="Study,Java"><meta name=description content="아이템 15: 클래스와 멤버의 접근 권한을 최소화하라 정보 은닉은 시스템을 구성하는 컴포넌트를 서로 독립시켜 준다.
정보 은닉의 장점 시스템 개발 속도를 높인다. 여러 컴포넌트를 병렬로 개발할 수 있다. 시스템 관리 비용을 낮춘다. 각 컴포넌트를 더 빨리 파악하고, 교체하는 데 부담이 줄어든다. 성능 최적화에 도움을 준다. 각 컴포넌트가 독립되어 있기 때문에 특정 컴포넌트만 최적화가 가능하다. 소프트웨어 재사용성을 높인다. 외부 의존 없이 동작하는 컴포넌트는 다른 환경에서도 사용이 쉽다. 대형 시스템 제작 난이도를 낮춘다."><meta name=author content><link rel=canonical href=https://junbread.win/posts/2021/effective-java-04/><link crossorigin=anonymous href=/assets/css/stylesheet.f6c1b3e9443ffcf8efd37433e13b909fd545f99414f2ac3e5b22795096fc9f44.css integrity="sha256-9sGz6UQ//Pjv03Qz4TuQn9VF+ZQU8qw+WyJ5UJb8n0Q=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://junbread.win/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://junbread.win/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://junbread.win/favicon-32x32.png><link rel=apple-touch-icon href=https://junbread.win/apple-touch-icon.png><link rel=mask-icon href=https://junbread.win/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet type=text/css crossorigin href=//cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.6/dist/web/variable/pretendardvariable-dynamic-subset.css><link rel=stylesheet type=text/css crossorigin href="//fonts.googleapis.com/css2?family=Source+Code+Pro"><script async src="https://www.googletagmanager.com/gtag/js?id=G-0QLLXH086F"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0QLLXH086F",{anonymize_ip:!1})}</script><meta property="og:title" content="이펙티브 자바 4장 정리"><meta property="og:description" content="아이템 15: 클래스와 멤버의 접근 권한을 최소화하라 정보 은닉은 시스템을 구성하는 컴포넌트를 서로 독립시켜 준다.
정보 은닉의 장점 시스템 개발 속도를 높인다. 여러 컴포넌트를 병렬로 개발할 수 있다. 시스템 관리 비용을 낮춘다. 각 컴포넌트를 더 빨리 파악하고, 교체하는 데 부담이 줄어든다. 성능 최적화에 도움을 준다. 각 컴포넌트가 독립되어 있기 때문에 특정 컴포넌트만 최적화가 가능하다. 소프트웨어 재사용성을 높인다. 외부 의존 없이 동작하는 컴포넌트는 다른 환경에서도 사용이 쉽다. 대형 시스템 제작 난이도를 낮춘다."><meta property="og:type" content="article"><meta property="og:url" content="https://junbread.win/posts/2021/effective-java-04/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-05T00:00:00+00:00"><meta property="article:modified_time" content="2021-04-05T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="이펙티브 자바 4장 정리"><meta name=twitter:description content="아이템 15: 클래스와 멤버의 접근 권한을 최소화하라 정보 은닉은 시스템을 구성하는 컴포넌트를 서로 독립시켜 준다.
정보 은닉의 장점 시스템 개발 속도를 높인다. 여러 컴포넌트를 병렬로 개발할 수 있다. 시스템 관리 비용을 낮춘다. 각 컴포넌트를 더 빨리 파악하고, 교체하는 데 부담이 줄어든다. 성능 최적화에 도움을 준다. 각 컴포넌트가 독립되어 있기 때문에 특정 컴포넌트만 최적화가 가능하다. 소프트웨어 재사용성을 높인다. 외부 의존 없이 동작하는 컴포넌트는 다른 환경에서도 사용이 쉽다. 대형 시스템 제작 난이도를 낮춘다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://junbread.win/posts/"},{"@type":"ListItem","position":3,"name":"이펙티브 자바 4장 정리","item":"https://junbread.win/posts/2021/effective-java-04/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"이펙티브 자바 4장 정리","name":"이펙티브 자바 4장 정리","description":"아이템 15: 클래스와 멤버의 접근 권한을 최소화하라 정보 은닉은 시스템을 구성하는 컴포넌트를 서로 독립시켜 준다.\n정보 은닉의 장점 시스템 개발 속도를 높인다. 여러 컴포넌트를 병렬로 개발할 수 있다. 시스템 관리 비용을 낮춘다. 각 컴포넌트를 더 빨리 파악하고, 교체하는 데 부담이 줄어든다. 성능 최적화에 도움을 준다. 각 컴포넌트가 독립되어 있기 때문에 특정 컴포넌트만 최적화가 가능하다. 소프트웨어 재사용성을 높인다. 외부 의존 없이 동작하는 컴포넌트는 다른 환경에서도 사용이 쉽다. 대형 시스템 제작 난이도를 낮춘다.","keywords":["Study","Java"],"articleBody":"아이템 15: 클래스와 멤버의 접근 권한을 최소화하라 정보 은닉은 시스템을 구성하는 컴포넌트를 서로 독립시켜 준다.\n정보 은닉의 장점 시스템 개발 속도를 높인다. 여러 컴포넌트를 병렬로 개발할 수 있다. 시스템 관리 비용을 낮춘다. 각 컴포넌트를 더 빨리 파악하고, 교체하는 데 부담이 줄어든다. 성능 최적화에 도움을 준다. 각 컴포넌트가 독립되어 있기 때문에 특정 컴포넌트만 최적화가 가능하다. 소프트웨어 재사용성을 높인다. 외부 의존 없이 동작하는 컴포넌트는 다른 환경에서도 사용이 쉽다. 대형 시스템 제작 난이도를 낮춘다. 미완성 상태에서도 개별 컴포넌트 동작을 검증할 수 있다. Java의 접근 제한자 private: 클래스 내부에서만 접근 가능 package-private (default): 패키지 내부의 모든 클래스에서 접근 가능 protected: 패키지 내부의 모든 클래스 + 자식 클래스에서 접근 가능 public: 모든 곳에서 접근 가능 주의점 public 클래스는 상수용 public static final 필드 외에 어떠한 public 필드도 가져서는 안 된다. public static final 필드의 경우 불변인지 점검해야 한다. ex) 배열 가변 객체를 참조하는 public static final 필드의 내부를 외부에서 변경 가능 unmodifiableList를 반환하거나, 복사본을 반환하는 접근자를 제공할 것 private static final Thing[] PRIVATE_VALUES = { ... }; public static final List\u003cThing\u003e VALUES = Collections.unmodifiableList(Arrays.asList(PRIVATE_VALUES)); private static final Thing[] PRIVATE_VALUES = { ... }; public static final Thing[] values() { return PRIVATE_VALUES.clone(); } 자바 9에서 새로 소개된 모듈에서는 export 되지 않은 모듈 내부의 public, protected 메서드를 모듈 외부에서 사용할 수 없다. 다만 jar 파일의 위치에 따라 무시되는 경우가 있으니 유의해야 한다.\n요약: 모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 한다.\n아이템 16: public 클래스에서는 public 필드가 아닌 접근자 메서드를 사용하라 public으로 공개할 클래스라면 내부 필드를 숨기고 접근자(getter) 메서드를 제공하는 것이 좋다.\n→ 나중에 클래스의 내부 표현 방식을 언제든 바꿀 수 있기 때문\npublic 필드가 불변이라면 불변식을 해칠 수 있는 위험성은 덜하지만, 내부 구현을 바꾸기 힘들어진다는 단점은 동일하다.\n// 코드 16-3 불변 필드를 노출한 public 클래스 - 과연 좋은가? (103-104쪽) public final class Time { private static final int HOURS_PER_DAY = 24; private static final int MINUTES_PER_HOUR = 60; public final int hour; public final int minute; public Time(int hour, int minute) { if (hour \u003c 0 || hour \u003e= HOURS_PER_DAY) throw new IllegalArgumentException(\"Hour: \" + hour); if (minute \u003c 0 || minute \u003e= MINUTES_PER_HOUR) throw new IllegalArgumentException(\"Min: \" + minute); this.hour = hour; this.minute = minute; } package-private, nested private 클래스의 경우, 내부에서만 사용될 것이 보장되기 때문에 노출해도 괜찮다.\nLombok의 @Getter 사용하면 접근자를 편리하게 생성할 수 있다.\n요약: public 클래스의 경우 필드를 직접 노출하는 대신 접근자를 사용하자.\n아이템 17: 변경 가능성을 최소화하라 불변 객체가 가지는 장점 단순하다. 본질적으로 스레드 안전하다. 안심하고 공유할 수 있다. 내부 데이터를 공유할 수 있다. 실패 원자성을 제공한다. 불변 객체의 단점 값이 다르면 새로운 객체로 만들어야 하기 때문에, 변경하는 데 드는 비용보다 새로운 객체를 만드는 데 훨씬 더 비용이 비싼 경우에는 성능이 하락할 수 있다. ex) BigInteger\n→ 이 경우 가변 동반 클래스를 제공하자. ex) String - StringBuilder\n클래스를 불변으로 만들기 객체의 상태를 변경하는 메서드를 제공하지 않는다.\n클래스를 확장할 수 없도록 한다.\n클래스를 final로 선언 모든 생성자를 private, package-private로 선언하고 public 정적 팩터리를 제공 모든 필드를 final로 선언한다.\n모든 필드를 private로 선언한다.\n자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다.\n불변으로 만들 수 없는 객체가 있다고 해도, 변경 가능한 부분을 최소한으로 하자.\nsetter 메서드는 꼭 필요한 경우에만 만들자.\n다른 합당한 이유가 없다면 모든 필드는 private final이어야 한다.\n생성자는 불변식 설정이 모두 완료된, 초기화가 완벽히 끝난 상태의 객체를 생성해야 한다.\n요약: 객체는 되도록 불변으로 만들고, 불가피하게 가변 객체로 만들더라도 변경할 수 있는 부분을 최소화하자.\n아이템 18: 상속보다는 컴포지션을 사용하라 상속의 단점 상속은 강력하지만, 캡슐화를 깨뜨린다. 상위 클래스가 어떻게 구현되느냐에 따라 하위 클래스의 동작에 이상이 생길 수 있다. 상위 클래스가 확장을 충분히 고려하지 않으면 하위 클래스는 상위 클래스가 변경될 때마다 수정해주어야 한다. public class InstrumentedHashSet\u003cE\u003e extends HashSet\u003cE\u003e { // 추가된 원소의 수 private int addCount = 0; public InstrumentedHashSet() { } public InstrumentedHashSet(int initCap, float loadFactor) { super(initCap, loadFactor); } @Override public boolean add(E e) { addCount++; return super.add(e); } @Override public boolean addAll(Collection\u003c? extends E\u003e c) { addCount += c.size(); return super.addAll(c); } public int getAddCount() { return addCount; } } 컴포지션 기존 클래스를 확장하는 대신, 새 클래스에 private으로 된 기존 클래스의 인스턴스를 참조하는 기법 새 클래스는 기존 클래스에 대응하는 메소드를 호출해 결과를 반환한다. 새로운 클래스는 기존 클래스의 내부 구현 방식의 영향에서 벗어나며, 기존 클래스에 새 메소드가 추가되어도 전혀 영향받지 않는다. public class ForwardingSet\u003cE\u003e implements Set\u003cE\u003e { private final Set\u003cE\u003e s; public ForwardingSet(Set\u003cE\u003e s) { this.s = s; } public void clear() { s.clear(); } public boolean contains(Object o) { return s.contains(o); } public boolean isEmpty() { return s.isEmpty(); } public int size() { return s.size(); } public Iterator\u003cE\u003e iterator() { return s.iterator(); } public boolean add(E e) { return s.add(e); } public boolean containsAll(Collection\u003c?\u003e c) { return s.containsAll(c); } public boolean addAll(Collection\u003c? extends E\u003e c) { return s.addAll(c); } public boolean removeAll(Collection?\u003e c) { return s.removeAll(c); } public boolean retainAll(Collection\u003c?\u003e c) { return s.retainAll(c); } public Object[] toArray() { return s.toArray(); } public \u003cT\u003e T[] toArray(T[] a) { return s.toArray(a); } @Override public boolean equals(Object o) { return s.equals(o); } @Override public int hashCode() { return s.hashCode(); } @Override public String toString() { return s.toString(); } } public class InstrumentedHashSet\u003cE\u003e extends ForwardingSet\u003cE\u003e { private int addCount = 0; public InstrumentedHashSet(Set\u003cE\u003e s) { super(s); } @Override public boolean add(E e) { addCount++; return super.add(e); } @Override public boolean addAll(Collection\u003c? extends E\u003e c) { addCount += c.size(); return super.addAll(c); } public int getAddCount() { return addCount; } } 상속은 반드시 하위 클래스가 상위 클래스의 ‘진짜’ 하위 타입인 경우에만 쓰여야 한다. B가 A가 아니라면, A를 private 필드로 두고, A와는 다른 API를 제공해야 한다. 즉, A는 B의 필수 구성요소가 아니라 구현하는 방법 중 하나일 뿐이다.\n상속을 사용하기 전 자문해야 할 것 확장하려는 클래스의 API에 아무런 결함이 없는가? 결함이 있다면, 이 결함이 하위 클래스의 API까지 전파되어도 괜찮은가? 요약: 상속은 하위 클래스가 상위 클래스의 진짜 하위 타입인 경우에만 사용하고, 그렇지 않을 경우에는 컴포지션을 사용하자.\n아이템 19: 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라 상속용 클래스는 재정의할 수 있는 메서드를 내부적으로 어떻게 이용하는지 문서로 남겨야 한다. → @implSpec 태그를 붙이면 자바독이 생성해 준다.\n상속용으로 설계한 클래스는 배포 전에 반드시 하위 클래스를 만들어 검증해야 한다.\n상속용 클래스의 생성자는 재정의 가능 메서드를 호출해서는 안 된다.\n→ 예상치 못한 에러를 발생시킬 수가 있다.\npublic class Super { // 잘못된 예 - 생성자가 재정의 가능 메서드를 호출한다. public Super() { overrideMe(); } public void overrideMe() { } } public final class Sub extends Super { // 초기화되지 않은 final 필드. 생성자에서 초기화한다. private final Instant instant; Sub() { instant = Instant.now(); } // 재정의 가능 메서드. 상위 클래스의 생성자가 호출한다. @Override public void overrideMe() { System.out.println(instant); } public static void main(String[] args) { Sub sub = new Sub(); sub.overrideMe(); } } Cloneable과 Serializable을 구현한 클래스의 경우 더 복잡하다. clone, readObject의 경우 새로운 객체를 만들기 때문에 생성자에서 재정의 가능 메서드 호출 금지와 동일한 제약사항을 가진다. Serializable의 경우 상속용 상위 클래스가 readResolve, writeReplace 구현하는 경우 private가 아닌 protected로 선언해야 하위 클래스에서 무시되지 않는다. 상속용으로 설계하지 않은 클래스는 상속을 금지하자. 상속을 허용하는 경우는 재정의 가능 메서드의 내부 구현을 상세하게 밝혀야 한다.\n아이템 20: 추상 클래스보다는 인터페이스를 우선하라 다중 구현의 두 가지 방법 추상 클래스, 인터페이스\n→ 추상 클래스를 구현하는 클래스는 반드시 추상 클래스의 하위 타입이 되어야 하기 때문에 유연성이 떨어진다.\n인터페이스가 가지는 장점 기존 클래스에도 손쉽게 구현할 수 있다: 추상 클래스의 경우 이미 다른 클래스를 상속받고 있다면 사용할 수 없다. 믹스인 정의에 안성맞춤이다. 계층구조가 없는 타입 프레임워크를 만들 수 있다. public interface Singer { AudioClip sing(Song s); } public interface Songwriter { Song compose(int chartPosition); } public interface SingerSongwriter extends Singer, SongWriter { AudioClip strum(); void actSensitive(); } 래퍼 클래스와 함께 사용하면 인터페이스는 기능을 향상시키는 안전하고 강력한 수단이 된다. public abstract class AbstractMapEntry\u003cK,V\u003e implements Map.Entry\u003cK,V\u003e { // 변경 가능한 엔트리는 이 메서드를 반드시 재정의해야 한다. @Override public V setValue(V value) { throw new UnsupportedOperationException(); } // Map.Entry.equals의 일반 규약을 구현한다. @Override public boolean equals(Object o) { if (o == this) return true; if (!(o instanceof Map.Entry)) return false; Map.Entry\u003c?,?\u003e e = (Map.Entry) o; return Objects.equals(e.getKey(), getKey()) \u0026\u0026 Objects.equals(e.getValue(), getValue()); } // Map.Entry.hashCode의 일반 규약을 구현한다. @Override public int hashCode() { return Objects.hashCode(getKey()) ^ Objects.hashCode(getValue()); } @Override public String toString() { return getKey() + \"=\" + getValue(); } } 아이템 21: 인터페이스는 구현하는 쪽을 생각해 설계하라 자바 8부터는 디폴트 메소드를 지원해 인터페이스에 메소드를 구현할 수 있게 되었다.\n주의점 생각할 수 있는 모든 상황에서 불변식을 해치지 않는 디폴트 메소드를 만드는 것은 어렵다.\n디폴트 메소드는 컴파일에 성공하더라도, 기존 구현체에 런타임 오류를 발생시킬 수 있다.\n기존 인터페이스에 디폴트 메소드로 새 메소드를 추가하는 일은 꼭 필요한 경우가 아니면 피해야 한다.\n→ 새 인터페이스에서의 디폴트 메소드는 표준적인 메소드 구현을 제공하는 데 아주 유용하다.\n아이템 22: 인터페이스는 타입을 정의하는 용도로만 사용하라 인터페이스는 자신을 구현한 클래스의 인스턴스를 참조할 수 있는 타입 역할을 한다. 다시 말해, 클래스가 어떤 인터페이스를 구현한다는 것은 자신의 인스턴스로 무엇을 할 수 있는지 클라이언트에 얘기해주는 것이다. 인터페이스는 오직 이 용도로만 사용해야 한다.\n상수를 공유할 목적으로 다음과 같은 상수 인터페이스를 만드는 경우가 있다.\n// 상수 인터페이스 안티패턴 - 사용금지! public interface PhysicalConstants { // 아보가드로 수 (1/몰) static final double AVOGADROS_NUMBER = 6.022_140_857e23; // 볼츠만 상수 (J/K) static final double BOLTZMANN_CONSTANT = 1.380_648_52e-23; // 전자 질량 (kg) static final double ELECTRON_MASS = 9.109_383_56e-31; } 사용자가 편의를 위해 특정 클래스에서 인터페이스를 구현한다면, 해당 클래스와 그 클래스의 하위 클래스의 모든 전역 네임스페이스가 인터페이스 상수로 오염된다.\n상수를 공개하는 방법 특정 클래스나 인터페이스에 강하게 연관된 상수라면, 그 클래스/인터페이스 자체에 추가 (ex. Integer.MAX_VALUE) 인스턴스화할 수 없는 유틸리티 클래스에 담아서 공개 아이템 23: 태그 달린 클래스보다는 클래스 계층구조를 활용하라 태그 달린 클래스 class Figure { enum Shape { RECTANGLE, CIRCLE }; final Shape shape; //태그 필드 double length; double width; double radius; Figure(double radius) { shape = Shape.CIRCLE; this.radius = radius; } Figure(double length, double width) { shape = Shape.RECTANGLE; this.length = length; this.width = width; } double area() { switch(shape) { case RECTANGLE: return length * width; case CIRCLE: return Math.PI * radius * radius; case default: throw new AssertionError(shape); } } } enum 선언, 태그 필드, switch 문 등 쓸데없는 코드가 많다. 여러 구현이 한 클래스에 혼합되어 있어서 가독성이 나쁘고, 메모리를 많이 사용한다. 새로운 의미를 추가하기 위해서 수정해야 하는 코드가 많다. → 태그 달린 클래스는 장황하고, 오류를 내기 쉽고, 비효율적이다.\n클래스 계층구조로 변환 abstract class Figure { abstract double area(); } class Circle extends Figure { final double radius; Circle(double radius) { this.radius = radius; } @Override double area() { return Math.PI * radius * radius; } } class Rectangle extends Figure { final double length; final double width; Rectangle(double length , double width) { this.length = length; this.width = width; } @Override double area() { return length * width; } } 쓸데없는 코드가 없고 간결하다. 컴파일러의 도움을 받을 수 있다. 독립적으로 계층구조 확장이 가능하다. 아이템 24: 멤버 클래스는 되도록 static으로 만들라 중첩 클래스의 종류 정적 멤버 클래스 비정적 멤버 클래스 익명 클래스 지역 클래스 비정적 멤버 클래스의 인스턴스는 암묵적으로 바깥 클래스의 인스턴스와 연결된다.\n그래서 비정적 멤버 클래스의 인스턴스 메소드에서 바깥 인스턴스의 메소드를 호출하거나, 바깥 인스턴스의 참조를 가져올 수 있다. 이 과정에서 시간과 메모리 공간이 소비되고, 가비지 컬렉션이 바깥 인스턴스를 수거하지 못했을 경우 메모리 누수가 생길 수 있다. 따라서 중첩 클래스의 인스턴스가 바깥 인스턴스와 독립적으로 존재할 수 있다면 정적 멤버 클래스로 만들어야 한다. 비정적 멤버 클래스는 바깥 인스턴스 없이 생성될 수 없기 때문이다. 비정적 멤버 클래스 → 어댑터를 정의할 때 자주 쓰인다. 즉, 어떤 클래스의 인스턴스를 감싸 마치 다른 클래스의 인스턴스처럼 보이게 하는 뷰로 사용하는 것이다.\npublic class MySet\u003cE\u003e extends AbstractSet\u003cE\u003e { ... // 생략 @Override public Iterator\u003cE\u003e iterator() { return new MyIterator(); } private class MyIterator implements Iterator\u003cE\u003e { ... } } private 정적 멤버 클래스는 바깥 클래스가 표현하는 객체의 한 부분(구성요소)을 나타낼 때 쓴다. ex) Map.Entry\n중첩 클래스를 사용하는 경우 메서드 밖에서 사용해야 하거나 메서드 안에 정의하기에 너무 길다면 멤버 클래스 멤버 클래스의 인스턴스 각각이 바깥 인스턴스를 참조한다면 비정적 멤버 클래스 그렇지 않으면 정적 멤버 클래스 중첩 클래스가 한 메소드 안에서만 쓰이면서 그 인스턴스를 생성하는 지점이 단 한 곳이고 해당 타입으로 쓰기에 적합한 클래스나 인터페이스가 이미 있다면 익명 클래스 그렇지 않으면 지역 클래스 아이템 25: 톱레벨 클래스는 한 파일에 하나만 담으라 소스 파일 하나에는 반드시 톱레벨 클래스를 하나만 담자. 소스 파일을 어떤 순서로 컴파일하냐에 따라 다른 동작을 만들 수 있다.\n// Utensil.java class Utensil { static final String NAME = \"pan\"; } class Dessert { static final String NAME = \"cake\"; } // Dessert.java class Utensil { static final String NAME = \"pot\"; } class Dessert { static final String NAME = \"pie\"; } ","wordCount":"2002","inLanguage":"en","datePublished":"2021-04-05T00:00:00Z","dateModified":"2021-04-05T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://junbread.win/posts/2021/effective-java-04/"},"publisher":{"@type":"Organization","name":"Junbread🥐","logo":{"@type":"ImageObject","url":"https://junbread.win/favicon.ico"}}}</script></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://junbread.win accesskey=h title="Junbread🥐 (Alt + H)">Junbread🥐</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://junbread.win/about title=About><span>About</span></a></li><li><a href=https://junbread.win/archives/ title=아카이브><span>아카이브</span></a></li><li><a href=https://junbread.win/tags/ title=태그><span>태그</span></a></li><li><a href=https://junbread.win/search/ title="검색 (Alt + /)" accesskey=/><span>검색</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://junbread.win>Home</a>&nbsp;»&nbsp;<a href=https://junbread.win/posts/>Posts</a></div><h1 class=post-title>이펙티브 자바 4장 정리</h1><div class=post-meta><span title='2021-04-05 00:00:00 +0000 UTC'>April 5, 2021</span>&nbsp;·&nbsp;10 min</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-15-%ed%81%b4%eb%9e%98%ec%8a%a4%ec%99%80-%eb%a9%a4%eb%b2%84%ec%9d%98-%ec%a0%91%ea%b7%bc-%ea%b6%8c%ed%95%9c%ec%9d%84-%ec%b5%9c%ec%86%8c%ed%99%94%ed%95%98%eb%9d%bc aria-label="아이템 15: 클래스와 멤버의 접근 권한을 최소화하라">아이템 15: 클래스와 멤버의 접근 권한을 최소화하라</a><ul><li><a href=#java%ec%9d%98-%ec%a0%91%ea%b7%bc-%ec%a0%9c%ed%95%9c%ec%9e%90 aria-label="Java의 접근 제한자">Java의 접근 제한자</a></li><li><a href=#%ec%a3%bc%ec%9d%98%ec%a0%90 aria-label=주의점>주의점</a></li></ul></li><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-16-public-%ed%81%b4%eb%9e%98%ec%8a%a4%ec%97%90%ec%84%9c%eb%8a%94-public-%ed%95%84%eb%93%9c%ea%b0%80-%ec%95%84%eb%8b%8c-%ec%a0%91%ea%b7%bc%ec%9e%90-%eb%a9%94%ec%84%9c%eb%93%9c%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc aria-label="아이템 16: public 클래스에서는 public 필드가 아닌 접근자 메서드를 사용하라">아이템 16: public 클래스에서는 public 필드가 아닌 접근자 메서드를 사용하라</a></li><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-17-%eb%b3%80%ea%b2%bd-%ea%b0%80%eb%8a%a5%ec%84%b1%ec%9d%84-%ec%b5%9c%ec%86%8c%ed%99%94%ed%95%98%eb%9d%bc aria-label="아이템 17: 변경 가능성을 최소화하라">아이템 17: 변경 가능성을 최소화하라</a><ul><li><a href=#%eb%b6%88%eb%b3%80-%ea%b0%9d%ec%b2%b4%ea%b0%80-%ea%b0%80%ec%a7%80%eb%8a%94-%ec%9e%a5%ec%a0%90 aria-label="불변 객체가 가지는 장점">불변 객체가 가지는 장점</a></li><li><a href=#%eb%b6%88%eb%b3%80-%ea%b0%9d%ec%b2%b4%ec%9d%98-%eb%8b%a8%ec%a0%90 aria-label="불변 객체의 단점">불변 객체의 단점</a></li><li><a href=#%ed%81%b4%eb%9e%98%ec%8a%a4%eb%a5%bc-%eb%b6%88%eb%b3%80%ec%9c%bc%eb%a1%9c-%eb%a7%8c%eb%93%a4%ea%b8%b0 aria-label="클래스를 불변으로 만들기">클래스를 불변으로 만들기</a></li></ul></li><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-18-%ec%83%81%ec%86%8d%eb%b3%b4%eb%8b%a4%eb%8a%94-%ec%bb%b4%ed%8f%ac%ec%a7%80%ec%85%98%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc aria-label="아이템 18: 상속보다는 컴포지션을 사용하라">아이템 18: 상속보다는 컴포지션을 사용하라</a><ul><li><a href=#%ec%83%81%ec%86%8d%ec%9d%98-%eb%8b%a8%ec%a0%90 aria-label="상속의 단점">상속의 단점</a></li><li><a href=#%ec%bb%b4%ed%8f%ac%ec%a7%80%ec%85%98 aria-label=컴포지션><strong>컴포지션</strong></a></li><li><a href=#%ec%83%81%ec%86%8d%ec%9d%84-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0-%ec%a0%84-%ec%9e%90%eb%ac%b8%ed%95%b4%ec%95%bc-%ed%95%a0-%ea%b2%83 aria-label="상속을 사용하기 전 자문해야 할 것"><strong>상속을 사용하기 전 자문해야 할 것</strong></a></li></ul></li><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-19-%ec%83%81%ec%86%8d%ec%9d%84-%ea%b3%a0%eb%a0%a4%ed%95%b4-%ec%84%a4%ea%b3%84%ed%95%98%ea%b3%a0-%eb%ac%b8%ec%84%9c%ed%99%94%ed%95%98%eb%9d%bc-%ea%b7%b8%eb%9f%ac%ec%a7%80-%ec%95%8a%ec%95%98%eb%8b%a4%eb%a9%b4-%ec%83%81%ec%86%8d%ec%9d%84-%ea%b8%88%ec%a7%80%ed%95%98%eb%9d%bc aria-label="아이템 19: 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라">아이템 19: 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라</a></li><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-20-%ec%b6%94%ec%83%81-%ed%81%b4%eb%9e%98%ec%8a%a4%eb%b3%b4%eb%8b%a4%eb%8a%94-%ec%9d%b8%ed%84%b0%ed%8e%98%ec%9d%b4%ec%8a%a4%eb%a5%bc-%ec%9a%b0%ec%84%a0%ed%95%98%eb%9d%bc aria-label="아이템 20: 추상 클래스보다는 인터페이스를 우선하라">아이템 20: 추상 클래스보다는 인터페이스를 우선하라</a><ul><li><a href=#%eb%8b%a4%ec%a4%91-%ea%b5%ac%ed%98%84%ec%9d%98-%eb%91%90-%ea%b0%80%ec%a7%80-%eb%b0%a9%eb%b2%95 aria-label="다중 구현의 두 가지 방법">다중 구현의 두 가지 방법</a></li><li><a href=#%ec%9d%b8%ed%84%b0%ed%8e%98%ec%9d%b4%ec%8a%a4%ea%b0%80-%ea%b0%80%ec%a7%80%eb%8a%94-%ec%9e%a5%ec%a0%90 aria-label="인터페이스가 가지는 장점">인터페이스가 가지는 장점</a></li></ul></li><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-21-%ec%9d%b8%ed%84%b0%ed%8e%98%ec%9d%b4%ec%8a%a4%eb%8a%94-%ea%b5%ac%ed%98%84%ed%95%98%eb%8a%94-%ec%aa%bd%ec%9d%84-%ec%83%9d%ea%b0%81%ed%95%b4-%ec%84%a4%ea%b3%84%ed%95%98%eb%9d%bc aria-label="아이템 21: 인터페이스는 구현하는 쪽을 생각해 설계하라">아이템 21: 인터페이스는 구현하는 쪽을 생각해 설계하라</a><ul><li><a href=#%ec%a3%bc%ec%9d%98%ec%a0%90-1 aria-label=주의점>주의점</a></li></ul></li><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-22-%ec%9d%b8%ed%84%b0%ed%8e%98%ec%9d%b4%ec%8a%a4%eb%8a%94-%ed%83%80%ec%9e%85%ec%9d%84-%ec%a0%95%ec%9d%98%ed%95%98%eb%8a%94-%ec%9a%a9%eb%8f%84%eb%a1%9c%eb%a7%8c-%ec%82%ac%ec%9a%a9%ed%95%98%eb%9d%bc aria-label="아이템 22: 인터페이스는 타입을 정의하는 용도로만 사용하라">아이템 22: 인터페이스는 타입을 정의하는 용도로만 사용하라</a><ul><li><a href=#%ec%83%81%ec%88%98%eb%a5%bc-%ea%b3%b5%ea%b0%9c%ed%95%98%eb%8a%94-%eb%b0%a9%eb%b2%95 aria-label="상수를 공개하는 방법">상수를 공개하는 방법</a></li></ul></li></ul><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-23-%ed%83%9c%ea%b7%b8-%eb%8b%ac%eb%a6%b0-%ed%81%b4%eb%9e%98%ec%8a%a4%eb%b3%b4%eb%8b%a4%eb%8a%94-%ed%81%b4%eb%9e%98%ec%8a%a4-%ea%b3%84%ec%b8%b5%ea%b5%ac%ec%a1%b0%eb%a5%bc-%ed%99%9c%ec%9a%a9%ed%95%98%eb%9d%bc aria-label="아이템 23: 태그 달린 클래스보다는 클래스 계층구조를 활용하라">아이템 23: 태그 달린 클래스보다는 클래스 계층구조를 활용하라</a><ul><ul><li><a href=#%ed%83%9c%ea%b7%b8-%eb%8b%ac%eb%a6%b0-%ed%81%b4%eb%9e%98%ec%8a%a4 aria-label="태그 달린 클래스">태그 달린 클래스</a></li><li><a href=#%ed%81%b4%eb%9e%98%ec%8a%a4-%ea%b3%84%ec%b8%b5%ea%b5%ac%ec%a1%b0%eb%a1%9c-%eb%b3%80%ed%99%98 aria-label="클래스 계층구조로 변환">클래스 계층구조로 변환</a></li></ul><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-24-%eb%a9%a4%eb%b2%84-%ed%81%b4%eb%9e%98%ec%8a%a4%eb%8a%94-%eb%90%98%eb%8f%84%eb%a1%9d-static%ec%9c%bc%eb%a1%9c-%eb%a7%8c%eb%93%a4%eb%9d%bc aria-label="아이템 24: 멤버 클래스는 되도록 static으로 만들라">아이템 24: 멤버 클래스는 되도록 static으로 만들라</a><ul><li><a href=#%ec%a4%91%ec%b2%a9-%ed%81%b4%eb%9e%98%ec%8a%a4%ec%9d%98-%ec%a2%85%eb%a5%98 aria-label="중첩 클래스의 종류">중첩 클래스의 종류</a></li><li><a href=#%ec%a4%91%ec%b2%a9-%ed%81%b4%eb%9e%98%ec%8a%a4%eb%a5%bc-%ec%82%ac%ec%9a%a9%ed%95%98%eb%8a%94-%ea%b2%bd%ec%9a%b0 aria-label="중첩 클래스를 사용하는 경우">중첩 클래스를 사용하는 경우</a></li></ul></li><li><a href=#%ec%95%84%ec%9d%b4%ed%85%9c-25-%ed%86%b1%eb%a0%88%eb%b2%a8-%ed%81%b4%eb%9e%98%ec%8a%a4%eb%8a%94-%ed%95%9c-%ed%8c%8c%ec%9d%bc%ec%97%90-%ed%95%98%eb%82%98%eb%a7%8c-%eb%8b%b4%ec%9c%bc%eb%9d%bc aria-label="아이템 25: 톱레벨 클래스는 한 파일에 하나만 담으라">아이템 25: 톱레벨 클래스는 한 파일에 하나만 담으라</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=아이템-15-클래스와-멤버의-접근-권한을-최소화하라>아이템 15: 클래스와 멤버의 접근 권한을 최소화하라<a hidden class=anchor aria-hidden=true href=#아이템-15-클래스와-멤버의-접근-권한을-최소화하라>#</a></h2><p>정보 은닉은 시스템을 구성하는 컴포넌트를 서로 독립시켜 준다.</p><ul><li>정보 은닉의 장점<ul><li>시스템 개발 속도를 높인다. 여러 컴포넌트를 병렬로 개발할 수 있다.</li><li>시스템 관리 비용을 낮춘다. 각 컴포넌트를 더 빨리 파악하고, 교체하는 데 부담이 줄어든다.</li><li>성능 최적화에 도움을 준다. 각 컴포넌트가 독립되어 있기 때문에 특정 컴포넌트만 최적화가 가능하다.</li><li>소프트웨어 재사용성을 높인다. 외부 의존 없이 동작하는 컴포넌트는 다른 환경에서도 사용이 쉽다.</li><li>대형 시스템 제작 난이도를 낮춘다. 미완성 상태에서도 개별 컴포넌트 동작을 검증할 수 있다.</li></ul></li></ul><h3 id=java의-접근-제한자>Java의 접근 제한자<a hidden class=anchor aria-hidden=true href=#java의-접근-제한자>#</a></h3><ul><li><strong>private</strong>: 클래스 내부에서만 접근 가능</li><li><strong>package-private</strong> (default): 패키지 내부의 모든 클래스에서 접근 가능</li><li><strong>protected</strong>: 패키지 내부의 모든 클래스 + 자식 클래스에서 접근 가능</li><li><strong>public</strong>: 모든 곳에서 접근 가능</li></ul><h3 id=주의점>주의점<a hidden class=anchor aria-hidden=true href=#주의점>#</a></h3><ul><li>public 클래스는 상수용 public static final 필드 외에 어떠한 public 필드도 가져서는 안 된다.</li><li>public static final 필드의 경우 불변인지 점검해야 한다. ex) 배열<ul><li>가변 객체를 참조하는 public static final 필드의 내부를 외부에서 변경 가능</li><li>unmodifiableList를 반환하거나, 복사본을 반환하는 접근자를 제공할 것</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Thing<span style=color:#f92672>[]</span> PRIVATE_VALUES <span style=color:#f92672>=</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> List<span style=color:#f92672>&lt;</span>Thing<span style=color:#f92672>&gt;</span> VALUES <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    Collections<span style=color:#f92672>.</span><span style=color:#a6e22e>unmodifiableList</span><span style=color:#f92672>(</span>Arrays<span style=color:#f92672>.</span><span style=color:#a6e22e>asList</span><span style=color:#f92672>(</span>PRIVATE_VALUES<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Thing<span style=color:#f92672>[]</span> PRIVATE_VALUES <span style=color:#f92672>=</span> <span style=color:#f92672>{</span> <span style=color:#f92672>...</span> <span style=color:#f92672>};</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Thing<span style=color:#f92672>[]</span> <span style=color:#a6e22e>values</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> PRIVATE_VALUES<span style=color:#f92672>.</span><span style=color:#a6e22e>clone</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>자바 9에서 새로 소개된 모듈에서는 export 되지 않은 모듈 내부의 public, protected 메서드를 모듈 외부에서 사용할 수 없다. 다만 jar 파일의 위치에 따라 무시되는 경우가 있으니 유의해야 한다.</p><blockquote><p>요약: 모든 클래스와 멤버의 접근성을 가능한 한 좁혀야 한다.</p></blockquote><h2 id=아이템-16-public-클래스에서는-public-필드가-아닌-접근자-메서드를-사용하라>아이템 16: public 클래스에서는 public 필드가 아닌 접근자 메서드를 사용하라<a hidden class=anchor aria-hidden=true href=#아이템-16-public-클래스에서는-public-필드가-아닌-접근자-메서드를-사용하라>#</a></h2><p>public으로 공개할 클래스라면 내부 필드를 숨기고 접근자(getter) 메서드를 제공하는 것이 좋다.</p><p>→ 나중에 클래스의 내부 표현 방식을 언제든 바꿀 수 있기 때문</p><p>public 필드가 불변이라면 불변식을 해칠 수 있는 위험성은 덜하지만, 내부 구현을 바꾸기 힘들어진다는 단점은 동일하다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 코드 16-3 불변 필드를 노출한 public 클래스 - 과연 좋은가? (103-104쪽)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Time</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> HOURS_PER_DAY    <span style=color:#f92672>=</span> <span style=color:#ae81ff>24</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> MINUTES_PER_HOUR <span style=color:#f92672>=</span> <span style=color:#ae81ff>60</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> hour<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>int</span> minute<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Time</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> hour<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> minute<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>hour <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>||</span> hour <span style=color:#f92672>&gt;=</span> HOURS_PER_DAY<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> IllegalArgumentException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Hour: &#34;</span> <span style=color:#f92672>+</span> hour<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>minute <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>||</span> minute <span style=color:#f92672>&gt;=</span> MINUTES_PER_HOUR<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> IllegalArgumentException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Min: &#34;</span> <span style=color:#f92672>+</span> minute<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>hour</span> <span style=color:#f92672>=</span> hour<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>minute</span> <span style=color:#f92672>=</span> minute<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></div><p>package-private, nested private 클래스의 경우, 내부에서만 사용될 것이 보장되기 때문에 노출해도 괜찮다.</p><p>Lombok의 @Getter 사용하면 접근자를 편리하게 생성할 수 있다.</p><blockquote><p>요약: public 클래스의 경우 필드를 직접 노출하는 대신 접근자를 사용하자.</p></blockquote><h2 id=아이템-17-변경-가능성을-최소화하라>아이템 17: 변경 가능성을 최소화하라<a hidden class=anchor aria-hidden=true href=#아이템-17-변경-가능성을-최소화하라>#</a></h2><h3 id=불변-객체가-가지는-장점>불변 객체가 가지는 장점<a hidden class=anchor aria-hidden=true href=#불변-객체가-가지는-장점>#</a></h3><ul><li>단순하다.</li><li>본질적으로 스레드 안전하다.</li><li>안심하고 공유할 수 있다.</li><li>내부 데이터를 공유할 수 있다.</li><li>실패 원자성을 제공한다.</li></ul><h3 id=불변-객체의-단점>불변 객체의 단점<a hidden class=anchor aria-hidden=true href=#불변-객체의-단점>#</a></h3><p>값이 다르면 새로운 객체로 만들어야 하기 때문에, 변경하는 데 드는 비용보다 새로운 객체를 만드는 데 훨씬 더 비용이 비싼 경우에는 성능이 하락할 수 있다. ex) BigInteger</p><p>→ 이 경우 가변 동반 클래스를 제공하자. ex) String - StringBuilder</p><h3 id=클래스를-불변으로-만들기>클래스를 불변으로 만들기<a hidden class=anchor aria-hidden=true href=#클래스를-불변으로-만들기>#</a></h3><ul><li><p>객체의 상태를 변경하는 메서드를 제공하지 않는다.</p></li><li><p>클래스를 확장할 수 없도록 한다.</p><ul><li>클래스를 final로 선언</li><li>모든 생성자를 private, package-private로 선언하고 public 정적 팩터리를 제공</li></ul></li><li><p>모든 필드를 final로 선언한다.</p></li><li><p>모든 필드를 private로 선언한다.</p></li><li><p>자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다.</p></li><li><p>불변으로 만들 수 없는 객체가 있다고 해도, 변경 가능한 부분을 최소한으로 하자.</p></li><li><p>setter 메서드는 꼭 필요한 경우에만 만들자.</p></li><li><p>다른 합당한 이유가 없다면 모든 필드는 private final이어야 한다.</p></li><li><p>생성자는 불변식 설정이 모두 완료된, <strong>초기화가 완벽히 끝난 상태의 객체</strong>를 생성해야 한다.</p></li></ul><blockquote><p>요약: 객체는 되도록 불변으로 만들고, 불가피하게 가변 객체로 만들더라도 변경할 수 있는 부분을 최소화하자.</p></blockquote><h2 id=아이템-18-상속보다는-컴포지션을-사용하라>아이템 18: 상속보다는 컴포지션을 사용하라<a hidden class=anchor aria-hidden=true href=#아이템-18-상속보다는-컴포지션을-사용하라>#</a></h2><h3 id=상속의-단점>상속의 단점<a hidden class=anchor aria-hidden=true href=#상속의-단점>#</a></h3><ul><li>상속은 강력하지만, 캡슐화를 깨뜨린다. 상위 클래스가 어떻게 구현되느냐에 따라 하위 클래스의 동작에 이상이 생길 수 있다.</li><li>상위 클래스가 확장을 충분히 고려하지 않으면 하위 클래스는 상위 클래스가 변경될 때마다 수정해주어야 한다.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>InstrumentedHashSet</span><span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>extends</span> HashSet<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 추가된 원소의 수
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> addCount <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>InstrumentedHashSet</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>InstrumentedHashSet</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> initCap<span style=color:#f92672>,</span> <span style=color:#66d9ef>float</span> loadFactor<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>initCap<span style=color:#f92672>,</span> loadFactor<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	addCount<span style=color:#f92672>++;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>addAll</span><span style=color:#f92672>(</span>Collection<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> E<span style=color:#f92672>&gt;</span> c<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	addCount <span style=color:#f92672>+=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>addAll</span><span style=color:#f92672>(</span>c<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAddCount</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> addCount<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h3 id=컴포지션><strong>컴포지션</strong><a hidden class=anchor aria-hidden=true href=#컴포지션>#</a></h3><ul><li>기존 클래스를 확장하는 대신, 새 클래스에 private으로 된 <strong>기존 클래스의 인스턴스를 참조하는 기법</strong></li><li>새 클래스는 기존 클래스에 대응하는 메소드를 호출해 결과를 반환한다.</li><li>새로운 클래스는 기존 클래스의 내부 구현 방식의 영향에서 벗어나며, 기존 클래스에 새 메소드가 추가되어도 전혀 영향받지 않는다.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ForwardingSet</span><span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>implements</span> Set<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> Set<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> s<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ForwardingSet</span><span style=color:#f92672>(</span>Set<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>s</span> <span style=color:#f92672>=</span> s<span style=color:#f92672>;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>clear</span><span style=color:#f92672>()</span>                <span style=color:#f92672>{</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>clear</span><span style=color:#f92672>();</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>Object o<span style=color:#f92672>)</span>  <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>o<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isEmpty</span><span style=color:#f92672>()</span>           <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>isEmpty</span><span style=color:#f92672>();</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>size</span><span style=color:#f92672>()</span>                  <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Iterator<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>iterator</span><span style=color:#f92672>()</span>      <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>iterator</span><span style=color:#f92672>();</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>)</span>            <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>e<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>containsAll</span><span style=color:#f92672>(</span>Collection<span style=color:#f92672>&lt;?&gt;</span> c<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                                   <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>containsAll</span><span style=color:#f92672>(</span>c<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>addAll</span><span style=color:#f92672>(</span>Collection<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> E<span style=color:#f92672>&gt;</span> c<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                                   <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>addAll</span><span style=color:#f92672>(</span>c<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>removeAll</span><span style=color:#f92672>(</span>Collection<span style=color:#f92672>?&gt;</span> c<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                                   <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>removeAll</span><span style=color:#f92672>(</span>c<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>retainAll</span><span style=color:#f92672>(</span>Collection<span style=color:#f92672>&lt;?&gt;</span> c<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                                   <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>retainAll</span><span style=color:#f92672>(</span>c<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> Object<span style=color:#f92672>[]</span> <span style=color:#a6e22e>toArray</span><span style=color:#f92672>()</span>          <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>toArray</span><span style=color:#f92672>();</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> T<span style=color:#f92672>[]</span> <span style=color:#a6e22e>toArray</span><span style=color:#f92672>(</span>T<span style=color:#f92672>[]</span> a<span style=color:#f92672>)</span>      <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>toArray</span><span style=color:#f92672>(</span>a<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>Object o<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                                       <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>o<span style=color:#f92672>);</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>hashCode</span><span style=color:#f92672>()</span>    <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>hashCode</span><span style=color:#f92672>();</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span> <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>();</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>InstrumentedHashSet</span><span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>extends</span> ForwardingSet<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>int</span> addCount <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>InstrumentedHashSet</span><span style=color:#f92672>(</span>Set<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> s<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>super</span><span style=color:#f92672>(</span>s<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>E e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	addCount<span style=color:#f92672>++;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>addAll</span><span style=color:#f92672>(</span>Collection<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> E<span style=color:#f92672>&gt;</span> c<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	addCount <span style=color:#f92672>+=</span> c<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>super</span><span style=color:#f92672>.</span><span style=color:#a6e22e>addAll</span><span style=color:#f92672>(</span>c<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>getAddCount</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> addCount<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>상속</strong>은 반드시 하위 클래스가 상위 클래스의 <strong>&lsquo;진짜&rsquo; 하위 타입</strong>인 경우에만 쓰여야 한다. B가 A가 아니라면, A를 private 필드로 두고, A와는 다른 API를 제공해야 한다. 즉, A는 B의 필수 구성요소가 아니라 구현하는 방법 중 하나일 뿐이다.</p><h3 id=상속을-사용하기-전-자문해야-할-것><strong>상속을 사용하기 전 자문해야 할 것</strong><a hidden class=anchor aria-hidden=true href=#상속을-사용하기-전-자문해야-할-것>#</a></h3><ul><li>확장하려는 클래스의 API에 아무런 결함이 없는가?</li><li>결함이 있다면, 이 결함이 하위 클래스의 API까지 전파되어도 괜찮은가?</li></ul><blockquote><p>요약: 상속은 하위 클래스가 상위 클래스의 진짜 하위 타입인 경우에만 사용하고, 그렇지 않을 경우에는 컴포지션을 사용하자.</p></blockquote><h2 id=아이템-19-상속을-고려해-설계하고-문서화하라-그러지-않았다면-상속을-금지하라>아이템 19: 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라<a hidden class=anchor aria-hidden=true href=#아이템-19-상속을-고려해-설계하고-문서화하라-그러지-않았다면-상속을-금지하라>#</a></h2><ul><li>상속용 클래스는 재정의할 수 있는 메서드를 내부적으로 어떻게 이용하는지 문서로 남겨야 한다.</li></ul><p>→ @implSpec 태그를 붙이면 자바독이 생성해 준다.</p><ul><li><p>상속용으로 설계한 클래스는 배포 전에 반드시 하위 클래스를 만들어 검증해야 한다.</p></li><li><p>상속용 클래스의 생성자는 재정의 가능 메서드를 호출해서는 안 된다.</p><p>→ 예상치 못한 에러를 발생시킬 수가 있다.</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Super</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 잘못된 예 - 생성자가 재정의 가능 메서드를 호출한다.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Super</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>overrideMe</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>overrideMe</span>() {
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Sub</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Super</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 초기화되지 않은 final 필드. 생성자에서 초기화한다.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>final</span> <span style=color:#a6e22e>Instant</span> <span style=color:#a6e22e>instant</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Sub</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>instant</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Instant</span>.<span style=color:#a6e22e>now</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 재정의 가능 메서드. 상위 클래스의 생성자가 호출한다.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>overrideMe</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>System</span>.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#a6e22e>instant</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String[] <span style=color:#a6e22e>args</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Sub</span> <span style=color:#a6e22e>sub</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Sub</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>sub</span>.<span style=color:#a6e22e>overrideMe</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>Cloneable과 Serializable을 구현한 클래스의 경우 더 복잡하다.<ul><li>clone, readObject의 경우 새로운 객체를 만들기 때문에 생성자에서 재정의 가능 메서드 호출 금지와 동일한 제약사항을 가진다.</li><li>Serializable의 경우 상속용 상위 클래스가 readResolve, writeReplace 구현하는 경우 private가 아닌 protected로 선언해야 하위 클래스에서 무시되지 않는다.</li></ul></li></ul><blockquote><p>상속용으로 설계하지 않은 클래스는 상속을 금지하자. 상속을 허용하는 경우는 재정의 가능 메서드의 내부 구현을 상세하게 밝혀야 한다.</p></blockquote><h2 id=아이템-20-추상-클래스보다는-인터페이스를-우선하라>아이템 20: 추상 클래스보다는 인터페이스를 우선하라<a hidden class=anchor aria-hidden=true href=#아이템-20-추상-클래스보다는-인터페이스를-우선하라>#</a></h2><h3 id=다중-구현의-두-가지-방법>다중 구현의 두 가지 방법<a hidden class=anchor aria-hidden=true href=#다중-구현의-두-가지-방법>#</a></h3><p>추상 클래스, 인터페이스</p><p>→ 추상 클래스를 구현하는 클래스는 반드시 추상 클래스의 하위 타입이 되어야 하기 때문에 유연성이 떨어진다.</p><h3 id=인터페이스가-가지는-장점>인터페이스가 가지는 장점<a hidden class=anchor aria-hidden=true href=#인터페이스가-가지는-장점>#</a></h3><ul><li>기존 클래스에도 손쉽게 구현할 수 있다: 추상 클래스의 경우 이미 다른 클래스를 상속받고 있다면 사용할 수 없다.</li><li>믹스인 정의에 안성맞춤이다.</li><li>계층구조가 없는 타입 프레임워크를 만들 수 있다.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Singer</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    AudioClip <span style=color:#a6e22e>sing</span><span style=color:#f92672>(</span>Song s<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Songwriter</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Song <span style=color:#a6e22e>compose</span><span style=color:#f92672>(</span><span style=color:#66d9ef>int</span> chartPosition<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>SingerSongwriter</span> <span style=color:#66d9ef>extends</span> Singer<span style=color:#f92672>,</span> SongWriter <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    AudioClip <span style=color:#a6e22e>strum</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>actSensitive</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li>래퍼 클래스와 함께 사용하면 인터페이스는 기능을 향상시키는 안전하고 강력한 수단이 된다.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AbstractMapEntry</span><span style=color:#f92672>&lt;</span>K<span style=color:#f92672>,</span>V<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>implements</span> Map<span style=color:#f92672>.</span><span style=color:#a6e22e>Entry</span><span style=color:#f92672>&lt;</span>K<span style=color:#f92672>,</span>V<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 변경 가능한 엔트리는 이 메서드를 반드시 재정의해야 한다.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> V <span style=color:#a6e22e>setValue</span><span style=color:#f92672>(</span>V value<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> UnsupportedOperationException<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Map.Entry.equals의 일반 규약을 구현한다.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>Object o<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>o <span style=color:#f92672>==</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!(</span>o <span style=color:#66d9ef>instanceof</span> Map<span style=color:#f92672>.</span><span style=color:#a6e22e>Entry</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        Map<span style=color:#f92672>.</span><span style=color:#a6e22e>Entry</span><span style=color:#f92672>&lt;?,?&gt;</span> e <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>Map<span style=color:#f92672>.</span><span style=color:#a6e22e>Entry</span><span style=color:#f92672>)</span> o<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>e<span style=color:#f92672>.</span><span style=color:#a6e22e>getKey</span><span style=color:#f92672>(),</span>   getKey<span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>&amp;&amp;</span> Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>e<span style=color:#f92672>.</span><span style=color:#a6e22e>getValue</span><span style=color:#f92672>(),</span> getValue<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Map.Entry.hashCode의 일반 규약을 구현한다.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>int</span> <span style=color:#a6e22e>hashCode</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>hashCode</span><span style=color:#f92672>(</span>getKey<span style=color:#f92672>())</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>^</span> Objects<span style=color:#f92672>.</span><span style=color:#a6e22e>hashCode</span><span style=color:#f92672>(</span>getValue<span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>toString</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> getKey<span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;=&#34;</span> <span style=color:#f92672>+</span> getValue<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=아이템-21-인터페이스는-구현하는-쪽을-생각해-설계하라>아이템 21: 인터페이스는 구현하는 쪽을 생각해 설계하라<a hidden class=anchor aria-hidden=true href=#아이템-21-인터페이스는-구현하는-쪽을-생각해-설계하라>#</a></h2><p>자바 8부터는 <strong>디폴트 메소드</strong>를 지원해 인터페이스에 메소드를 구현할 수 있게 되었다.</p><h3 id=주의점-1>주의점<a hidden class=anchor aria-hidden=true href=#주의점-1>#</a></h3><ul><li><p>생각할 수 있는 모든 상황에서 불변식을 해치지 않는 디폴트 메소드를 만드는 것은 어렵다.</p></li><li><p>디폴트 메소드는 컴파일에 성공하더라도, 기존 구현체에 런타임 오류를 발생시킬 수 있다.</p></li><li><p>기존 인터페이스에 디폴트 메소드로 새 메소드를 추가하는 일은 꼭 필요한 경우가 아니면 피해야 한다.</p><p>→ 새 인터페이스에서의 디폴트 메소드는 표준적인 메소드 구현을 제공하는 데 아주 유용하다.</p></li></ul><h2 id=아이템-22-인터페이스는-타입을-정의하는-용도로만-사용하라>아이템 22: 인터페이스는 타입을 정의하는 용도로만 사용하라<a hidden class=anchor aria-hidden=true href=#아이템-22-인터페이스는-타입을-정의하는-용도로만-사용하라>#</a></h2><p>인터페이스는 자신을 구현한 클래스의 인스턴스를 참조할 수 있는 타입 역할을 한다. 다시 말해, 클래스가 어떤 인터페이스를 구현한다는 것은 <strong>자신의 인스턴스로 무엇을 할 수 있는지 클라이언트에 얘기해주는 것이다.</strong> 인터페이스는 오직 이 용도로만 사용해야 한다.</p><p>상수를 공유할 목적으로 다음과 같은 상수 인터페이스를 만드는 경우가 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 상수 인터페이스 안티패턴 - 사용금지!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>PhysicalConstants</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 아보가드로 수 (1/몰)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>double</span> AVOGADROS_NUMBER   <span style=color:#f92672>=</span> <span style=color:#ae81ff>6.022_140_857e23</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 볼츠만 상수 (J/K)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>double</span> BOLTZMANN_CONSTANT <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.380_648_52e-23</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 전자 질량 (kg)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>double</span> ELECTRON_MASS      <span style=color:#f92672>=</span> <span style=color:#ae81ff>9.109_383_56e-31</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>사용자가 편의를 위해 특정 클래스에서 인터페이스를 구현한다면, 해당 클래스와 그 클래스의 하위 클래스의 모든 전역 네임스페이스가 인터페이스 상수로 오염된다.</p><h3 id=상수를-공개하는-방법>상수를 공개하는 방법<a hidden class=anchor aria-hidden=true href=#상수를-공개하는-방법>#</a></h3><ul><li>특정 클래스나 인터페이스에 강하게 연관된 상수라면, 그 클래스/인터페이스 자체에 추가
(ex. Integer.MAX_VALUE)</li><li>인스턴스화할 수 없는 유틸리티 클래스에 담아서 공개</li></ul><h1 id=아이템-23-태그-달린-클래스보다는-클래스-계층구조를-활용하라>아이템 23: 태그 달린 클래스보다는 클래스 계층구조를 활용하라<a hidden class=anchor aria-hidden=true href=#아이템-23-태그-달린-클래스보다는-클래스-계층구조를-활용하라>#</a></h1><h3 id=태그-달린-클래스>태그 달린 클래스<a hidden class=anchor aria-hidden=true href=#태그-달린-클래스>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Figure</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>enum</span> <span style=color:#a6e22e>Shape</span> { <span style=color:#a6e22e>RECTANGLE</span>, <span style=color:#a6e22e>CIRCLE</span> };
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>final</span> <span style=color:#a6e22e>Shape</span> <span style=color:#a6e22e>shape</span>; <span style=color:#75715e>//태그 필드
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>width</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>radius</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>Figure</span>(<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>radius</span>) {
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>shape</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Shape</span>.<span style=color:#a6e22e>CIRCLE</span>;
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>radius</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>radius</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>Figure</span>(<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>length</span>, <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>width</span>) {
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>shape</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>Shape</span>.<span style=color:#a6e22e>RECTANGLE</span>;
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>width</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span>() {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>switch</span>(<span style=color:#a6e22e>shape</span>) {
</span></span><span style=display:flex><span>						<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>RECTANGLE</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>								<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>width</span>;
</span></span><span style=display:flex><span>						<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>CIRCLE</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>								<span style=color:#66d9ef>return</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>radius</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>radius</span>;
</span></span><span style=display:flex><span>						<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>								<span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>AssertionError</span>(<span style=color:#a6e22e>shape</span>);
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>enum 선언, 태그 필드, switch 문 등 쓸데없는 코드가 많다.</li><li>여러 구현이 한 클래스에 혼합되어 있어서 가독성이 나쁘고, 메모리를 많이 사용한다.</li><li>새로운 의미를 추가하기 위해서 수정해야 하는 코드가 많다.</li></ul><p>→ 태그 달린 클래스는 장황하고, 오류를 내기 쉽고, 비효율적이다.</p><h3 id=클래스-계층구조로-변환>클래스 계층구조로 변환<a hidden class=anchor aria-hidden=true href=#클래스-계층구조로-변환>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Figure</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Circle</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Figure</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>final</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>radius</span>;
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>Circle</span>(<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>radius</span>) {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>radius</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>radius</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Override</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span>() {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>return</span> Math.<span style=color:#a6e22e>PI</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>radius</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>radius</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Rectangle</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Figure</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>final</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>final</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>width</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>Rectangle</span>(<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>length</span> , <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>width</span>) {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>length</span>;
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>width</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#960050;background-color:#1e0010>@</span><span style=color:#a6e22e>Override</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>double</span> <span style=color:#a6e22e>area</span>() {
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>length</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>width</span>;
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>쓸데없는 코드가 없고 간결하다.</li><li>컴파일러의 도움을 받을 수 있다.</li><li>독립적으로 계층구조 확장이 가능하다.</li></ul><h2 id=아이템-24-멤버-클래스는-되도록-static으로-만들라>아이템 24: 멤버 클래스는 되도록 static으로 만들라<a hidden class=anchor aria-hidden=true href=#아이템-24-멤버-클래스는-되도록-static으로-만들라>#</a></h2><h3 id=중첩-클래스의-종류>중첩 클래스의 종류<a hidden class=anchor aria-hidden=true href=#중첩-클래스의-종류>#</a></h3><ul><li>정적 멤버 클래스</li><li>비정적 멤버 클래스</li><li>익명 클래스</li><li>지역 클래스</li></ul><p>비정적 멤버 클래스의 인스턴스는 암묵적으로 바깥 클래스의 인스턴스와 연결된다.</p><ul><li>그래서 비정적 멤버 클래스의 인스턴스 메소드에서 바깥 인스턴스의 메소드를 호출하거나, 바깥 인스턴스의 참조를 가져올 수 있다.</li><li>이 과정에서 시간과 메모리 공간이 소비되고, 가비지 컬렉션이 바깥 인스턴스를 수거하지 못했을 경우 메모리 누수가 생길 수 있다.</li><li>따라서 <strong>중첩 클래스의 인스턴스가 바깥 인스턴스와 독립적으로 존재할 수 있다면 정적 멤버 클래스로 만들어야 한다</strong>. 비정적 멤버 클래스는 바깥 인스턴스 없이 생성될 수 없기 때문이다.</li></ul><p>비정적 멤버 클래스 → 어댑터를 정의할 때 자주 쓰인다. 즉, 어떤 클래스의 인스턴스를 감싸 마치 다른 클래스의 인스턴스처럼 보이게 하는 뷰로 사용하는 것이다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MySet</span><span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>extends</span> AbstractSet<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span> <span style=color:#75715e>// 생략
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span> <span style=color:#66d9ef>public</span> Iterator<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>iterator</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> MyIterator<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyIterator</span> <span style=color:#66d9ef>implements</span> Iterator<span style=color:#f92672>&lt;</span>E<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>private 정적 멤버 클래스</strong>는 바깥 클래스가 표현하는 객체의 한 부분(구성요소)을 나타낼 때 쓴다. ex) Map.Entry</p><h3 id=중첩-클래스를-사용하는-경우>중첩 클래스를 사용하는 경우<a hidden class=anchor aria-hidden=true href=#중첩-클래스를-사용하는-경우>#</a></h3><ul><li>메서드 밖에서 사용해야 하거나 메서드 안에 정의하기에 너무 길다면 <strong>멤버 클래스</strong><ul><li>멤버 클래스의 인스턴스 각각이 바깥 인스턴스를 참조한다면 <strong>비정적 멤버 클래스</strong></li><li>그렇지 않으면 <strong>정적 멤버 클래스</strong></li></ul></li><li>중첩 클래스가 한 메소드 안에서만 쓰이면서 그 인스턴스를 생성하는 지점이 단 한 곳이고 해당 타입으로 쓰기에 적합한 클래스나 인터페이스가 이미 있다면 <strong>익명 클래스</strong></li><li>그렇지 않으면 <strong>지역 클래스</strong></li></ul><h2 id=아이템-25-톱레벨-클래스는-한-파일에-하나만-담으라>아이템 25: 톱레벨 클래스는 한 파일에 하나만 담으라<a hidden class=anchor aria-hidden=true href=#아이템-25-톱레벨-클래스는-한-파일에-하나만-담으라>#</a></h2><p>소스 파일 하나에는 반드시 톱레벨 클래스를 하나만 담자. 소스 파일을 어떤 순서로 컴파일하냐에 따라 다른 동작을 만들 수 있다.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsx data-lang=jsx><span style=display:flex><span><span style=color:#75715e>// Utensil.java
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Utensil</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String <span style=color:#a6e22e>NAME</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;pan&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dessert</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String <span style=color:#a6e22e>NAME</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;cake&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Dessert.java
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Utensil</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String <span style=color:#a6e22e>NAME</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;pot&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dessert</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> String <span style=color:#a6e22e>NAME</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;pie&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://junbread.win/tags/study/>Study</a></li><li><a href=https://junbread.win/tags/java/>Java</a></li></ul><nav class=paginav><a class=prev href=https://junbread.win/posts/2021/effective-java-05/><span class=title>« Prev</span><br><span>이펙티브 자바 5장 정리</span></a>
<a class=next href=https://junbread.win/posts/2021/effective-java-03/><span class=title>Next »</span><br><span>이펙티브 자바 3장 정리</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=junbread/blog data-repo-id=R_kgDOJLcBtQ data-category=Comments data-category-id=DIC_kwDOJLcBtc4CVATm data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=dark data-lang=ko data-loading=lazy crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2023 <a href=https://junbread.win>Junbread🥐</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>